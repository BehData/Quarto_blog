<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniel Calenzani">
<meta name="dcterms.date" content="2023-03-12">
<meta name="description" content="Number of vehicles involved in a car crash influence in the number of deathly victims?">

<title>INICIATIVA CIENCIA DE DATOS - Car crash and number of deathly victims: a peruvian case</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">INICIATIVA CIENCIA DE DATOS</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Proyectos</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Data-Science-Project-R-Python"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#general-considerations" id="toc-general-considerations" class="nav-link active" data-scroll-target="#general-considerations">General considerations:</a></li>
  <li><a href="#step-1-install-and-load-the-packages" id="toc-step-1-install-and-load-the-packages" class="nav-link" data-scroll-target="#step-1-install-and-load-the-packages">Step 1: Install and load the packages</a></li>
  <li><a href="#step-2-load-the-data-into-r" id="toc-step-2-load-the-data-into-r" class="nav-link" data-scroll-target="#step-2-load-the-data-into-r">Step 2: Load the data into R</a></li>
  <li><a href="#step-3-explore-outcome-variable-must-be-numeric" id="toc-step-3-explore-outcome-variable-must-be-numeric" class="nav-link" data-scroll-target="#step-3-explore-outcome-variable-must-be-numeric">Step 3: Explore outcome variable (must be numeric)</a></li>
  <li><a href="#step-4-make-sure-data-assumptions" id="toc-step-4-make-sure-data-assumptions" class="nav-link" data-scroll-target="#step-4-make-sure-data-assumptions">Step 4: Make sure data assumptions</a>
  <ul>
  <li><a href="#a.-linearity" id="toc-a.-linearity" class="nav-link" data-scroll-target="#a.-linearity">A. Linearity</a></li>
  <li><a href="#b.-independence-of-observations" id="toc-b.-independence-of-observations" class="nav-link" data-scroll-target="#b.-independence-of-observations">B. Independence of observations</a></li>
  <li><a href="#c.-normality" id="toc-c.-normality" class="nav-link" data-scroll-target="#c.-normality">C. Normality</a></li>
  </ul></li>
  <li><a href="#step-5-perform-the-linear-regression-analysis" id="toc-step-5-perform-the-linear-regression-analysis" class="nav-link" data-scroll-target="#step-5-perform-the-linear-regression-analysis">Step 5: Perform the linear regression analysis</a></li>
  <li><a href="#step-6-check-the-homocedasticity" id="toc-step-6-check-the-homocedasticity" class="nav-link" data-scroll-target="#step-6-check-the-homocedasticity">Step 6: Check the homocedasticity</a></li>
  <li><a href="#step-7-perform-a-graph-to-visualize-the-results" id="toc-step-7-perform-a-graph-to-visualize-the-results" class="nav-link" data-scroll-target="#step-7-perform-a-graph-to-visualize-the-results">Step 7: Perform a graph to visualize the results</a></li>
  <li><a href="#step-8-report-and-interpret-your-results" id="toc-step-8-report-and-interpret-your-results" class="nav-link" data-scroll-target="#step-8-report-and-interpret-your-results">Step 8: Report and interpret your results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Car crash and number of deathly victims: a peruvian case</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Multiple linear regression</div>
    <div class="quarto-category">Car Crash</div>
  </div>
  </div>

<div>
  <div class="description">
    Number of vehicles involved in a car crash influence in the number of deathly victims?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Daniel Calenzani </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 12, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="general-considerations" class="level3">
<h3 class="anchored" data-anchor-id="general-considerations">General considerations:</h3>
<p>Do the number of vehicles involved in a car crash have an impact in the number of deathly victims? We tested the national census of peruvian police precincts (INEI, 2017) to find out. However this analysis is, in essence, an exercise in application of the regression approach applied to publicly accessible databases.</p>
<p>We’ve divided the analysis in 6 steps, using the guide proposed by Rebecca Bevans in <a href="https://www.scribbr.com/statistics/linear-regression-in-r/">Linear Regression in R - A Step-by-Step Guide &amp; Examples</a></p>
</section>
<section id="step-1-install-and-load-the-packages" class="level3">
<h3 class="anchored" data-anchor-id="step-1-install-and-load-the-packages">Step 1: Install and load the packages</h3>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ lubridate 1.9.2     ✔ tibble    3.1.8
✔ purrr     1.0.1     ✔ tidyr     1.3.0
✔ readr     2.1.4     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-load-the-data-into-r" class="level3">
<h3 class="anchored" data-anchor-id="step-2-load-the-data-into-r">Step 2: Load the data into R</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the database</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data_at <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"data/db_censo_comisarias.sav"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID_N              UBIGEO              CCDI             NOMBREDI        
 Length:68811       Length:68811       Length:68811       Length:68811      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
      ANIO          ID_AT             AT_N         AT_NALF         
 Min.   :2016   Min.   :  1.00   Min.   : NA     Length:68811      
 1st Qu.:2016   1st Qu.: 10.00   1st Qu.: NA     Class :character  
 Median :2016   Median : 25.00   Median : NA     Mode  :character  
 Mean   :2016   Mean   : 29.52   Mean   :NaN                       
 3rd Qu.:2017   3rd Qu.: 46.00   3rd Qu.: NA                       
 Max.   :2017   Max.   :200.00   Max.   : NA                       
                                 NA's   :68811                     
     AT_TOT           AT101         AT101_O           AT101_NRO        
 Min.   :  1.00   Min.   :1.000   Length:68811       Length:68811      
 1st Qu.: 38.00   1st Qu.:3.000   Class :character   Class :character  
 Median : 75.00   Median :5.000   Mode  :character   Mode  :character  
 Mean   : 58.03   Mean   :3.996                                        
 3rd Qu.: 75.00   3rd Qu.:5.000                                        
 Max.   :200.00   Max.   :6.000                                        
                                                                       
  AT101_ALF            AT102             AT103_D            AT103_M         
 Length:68811       Length:68811       Length:68811       Length:68811      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
   AT103_A            AT103_HOR       AT103_MIN         AT104A     
 Length:68811       Min.   : 0.00   Min.   : 0.00   Min.   :1.000  
 Class :character   1st Qu.: 9.00   1st Qu.: 5.00   1st Qu.:2.000  
 Mode  :character   Median :14.00   Median :30.00   Median :4.000  
                    Mean   :14.96   Mean   :24.46   Mean   :3.667  
                    3rd Qu.:18.00   3rd Qu.:40.00   3rd Qu.:4.000  
                    Max.   :99.00   Max.   :99.00   Max.   :8.000  
                                                                   
   AT104A_O             AT104B        AT104B_O          AT104C_V1        
 Length:68811       Min.   :1.000   Length:68811       Length:68811      
 Class :character   1st Qu.:2.000   Class :character   Class :character  
 Mode  :character   Median :2.000   Mode  :character   Mode  :character  
                    Mean   :2.623                                        
                    3rd Qu.:2.000                                        
                    Max.   :7.000                                        
                                                                         
  AT104C_R1          AT104C_V2          AT104C_R2         AT104D_DPTO       
 Length:68811       Length:68811       Length:68811       Length:68811      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
 AT104D_PROV        AT104D_DIST            AT105         AT105_O         
 Length:68811       Length:68811       Min.   : 1.00   Length:68811      
 Class :character   Class :character   1st Qu.: 4.00   Class :character  
 Mode  :character   Mode  :character   Median : 5.00   Mode  :character  
                                       Mean   : 5.39                     
                                       3rd Qu.: 8.00                     
                                       Max.   :12.00                     
                                                                         
    AT106_1        AT106_1_CANT      AT106_2         AT106_2_CANT  
 Min.   :0.0000   Min.   :1.00    Min.   :0.00000   Min.   :1.00   
 1st Qu.:0.0000   1st Qu.:1.00    1st Qu.:0.00000   1st Qu.:1.00   
 Median :0.0000   Median :1.00    Median :0.00000   Median :1.00   
 Mean   :0.3613   Mean   :1.19    Mean   :0.05586   Mean   :1.04   
 3rd Qu.:1.0000   3rd Qu.:1.00    3rd Qu.:0.00000   3rd Qu.:1.00   
 Max.   :1.0000   Max.   :8.00    Max.   :1.00000   Max.   :3.00   
                  NA's   :43947                     NA's   :64967  
    AT106_3         AT106_3_CANT      AT106_4        AT106_4_CANT  
 Min.   :0.00000   Min.   :1.00    Min.   :0.0000   Min.   :1.00   
 1st Qu.:0.00000   1st Qu.:1.00    1st Qu.:0.0000   1st Qu.:1.00   
 Median :0.00000   Median :1.00    Median :0.0000   Median :1.00   
 Mean   :0.08968   Mean   :1.06    Mean   :0.1725   Mean   :1.09   
 3rd Qu.:0.00000   3rd Qu.:1.00    3rd Qu.:0.0000   3rd Qu.:1.00   
 Max.   :1.00000   Max.   :4.00    Max.   :1.0000   Max.   :6.00   
                   NA's   :62640                    NA's   :56939  
    AT106_5          AT106_5_CANT      AT106_6         AT106_6_CANT  
 Min.   :0.000000   Min.   :1.00    Min.   :0.00000   Min.   :1.00   
 1st Qu.:0.000000   1st Qu.:1.00    1st Qu.:0.00000   1st Qu.:1.00   
 Median :0.000000   Median :1.00    Median :0.00000   Median :1.00   
 Mean   :0.008676   Mean   :1.03    Mean   :0.05389   Mean   :1.05   
 3rd Qu.:0.000000   3rd Qu.:1.00    3rd Qu.:0.00000   3rd Qu.:1.00   
 Max.   :1.000000   Max.   :2.00    Max.   :1.00000   Max.   :4.00   
                    NA's   :68214                     NA's   :65103  
    AT106_7         AT106_7_CANT      AT106_8         AT106_8_CANT  
 Min.   :0.00000   Min.   :1.00    Min.   :0.00000   Min.   :1.00   
 1st Qu.:0.00000   1st Qu.:1.00    1st Qu.:0.00000   1st Qu.:1.00   
 Median :0.00000   Median :1.00    Median :0.00000   Median :1.00   
 Mean   :0.02042   Mean   :1.06    Mean   :0.08654   Mean   :1.05   
 3rd Qu.:0.00000   3rd Qu.:1.00    3rd Qu.:0.00000   3rd Qu.:1.00   
 Max.   :1.00000   Max.   :3.00    Max.   :1.00000   Max.   :4.00   
                   NA's   :67406                     NA's   :62856  
    AT106_9         AT106_9_CANT      AT106_10        AT106_10_CANT  
 Min.   :0.00000   Min.   :1.00    Min.   :0.000000   Min.   :1.00   
 1st Qu.:0.00000   1st Qu.:1.00    1st Qu.:0.000000   1st Qu.:1.00   
 Median :0.00000   Median :1.00    Median :0.000000   Median :1.00   
 Mean   :0.04305   Mean   :1.11    Mean   :0.008967   Mean   :1.03   
 3rd Qu.:0.00000   3rd Qu.:1.00    3rd Qu.:0.000000   3rd Qu.:1.00   
 Max.   :1.00000   Max.   :4.00    Max.   :1.000000   Max.   :3.00   
                   NA's   :65849                      NA's   :68194  
    AT106_11       AT106_11_CANT      AT106_12        AT106_12_O       
 Min.   :0.00000   Min.   :1.00    Min.   :0.00000   Length:68811      
 1st Qu.:0.00000   1st Qu.:1.00    1st Qu.:0.00000   Class :character  
 Median :0.00000   Median :1.00    Median :0.00000   Mode  :character  
 Mean   :0.07667   Mean   :1.12    Mean   :0.00372                     
 3rd Qu.:0.00000   3rd Qu.:1.00    3rd Qu.:0.00000                     
 Max.   :1.00000   Max.   :5.00    Max.   :1.00000                     
                   NA's   :63535                                       
 AT106_12_CANT      AT106_13      AT106_13_CANT      AT106_14     
 Min.   :1.00    Min.   :0.0000   Min.   :1.00    Min.   :0.0000  
 1st Qu.:1.00    1st Qu.:0.0000   1st Qu.:1.00    1st Qu.:0.0000  
 Median :1.00    Median :0.0000   Median :1.00    Median :0.0000  
 Mean   :1.01    Mean   :0.2003   Mean   :1.06    Mean   :0.1692  
 3rd Qu.:1.00    3rd Qu.:0.0000   3rd Qu.:1.00    3rd Qu.:0.0000  
 Max.   :2.00    Max.   :1.0000   Max.   :3.00    Max.   :1.0000  
 NA's   :68555                    NA's   :55028                   
 AT106_14_CANT      AT106_15        AT106_15_CANT      AT106_16       
 Min.   : 0.00   Min.   :0.000000   Min.   :1.00    Min.   :0.000000  
 1st Qu.: 1.00   1st Qu.:0.000000   1st Qu.:1.00    1st Qu.:0.000000  
 Median : 1.00   Median :0.000000   Median :1.00    Median :0.000000  
 Mean   : 1.12   Mean   :0.003081   Mean   :1.02    Mean   :0.008022  
 3rd Qu.: 1.00   3rd Qu.:0.000000   3rd Qu.:1.00    3rd Qu.:0.000000  
 Max.   :10.00   Max.   :1.000000   Max.   :2.00    Max.   :1.000000  
 NA's   :57167                      NA's   :68599                     
 AT106_16_CANT      AT106_17        AT106_17_CANT      AT106_18
 Min.   :1.00    Min.   :0.000000   Min.   :1       Min.   :0  
 1st Qu.:1.00    1st Qu.:0.000000   1st Qu.:1       1st Qu.:0  
 Median :1.00    Median :0.000000   Median :1       Median :0  
 Mean   :1.02    Mean   :0.001061   Mean   :1       Mean   :0  
 3rd Qu.:1.00    3rd Qu.:0.000000   3rd Qu.:1       3rd Qu.:0  
 Max.   :2.00    Max.   :1.000000   Max.   :1       Max.   :0  
 NA's   :68259                      NA's   :68738              
  AT106_18_O        AT106_18_CANT      AT107_1          AT107_2      
 Length:68811       Min.   : NA     Min.   :0.0000   Min.   :0.0000  
 Class :character   1st Qu.: NA     1st Qu.:0.0000   1st Qu.:0.0000  
 Mode  :character   Median : NA     Median :0.0000   Median :1.0000  
                    Mean   :NaN     Mean   :0.2991   Mean   :0.5817  
                    3rd Qu.: NA     3rd Qu.:1.0000   3rd Qu.:1.0000  
                    Max.   : NA     Max.   :1.0000   Max.   :1.0000  
                    NA's   :68811                                    
    AT107_3           AT108          AT108_1         AT108_2      
 Min.   :0.0000   Min.   :1.000   Min.   : 1.00   Min.   : 0.000  
 1st Qu.:0.0000   1st Qu.:2.000   1st Qu.: 1.00   1st Qu.: 1.000  
 Median :0.0000   Median :2.000   Median : 1.00   Median : 1.000  
 Mean   :0.2245   Mean   :2.332   Mean   : 1.28   Mean   : 1.609  
 3rd Qu.:0.0000   3rd Qu.:3.000   3rd Qu.: 1.00   3rd Qu.: 2.000  
 Max.   :1.0000   Max.   :3.000   Max.   :24.00   Max.   :72.000  
                                  NA's   :66355   NA's   :25305   
    AT108_3          AT109_1          AT109_2           AT109_3        
 Min.   : 0.000   Min.   :0.0000   Min.   :0.00000   Min.   :0.000000  
 1st Qu.: 1.000   1st Qu.:0.0000   1st Qu.:0.00000   1st Qu.:0.000000  
 Median : 1.000   Median :0.0000   Median :0.00000   Median :0.000000  
 Mean   : 1.278   Mean   :0.2434   Mean   :0.01888   Mean   :0.006336  
 3rd Qu.: 2.000   3rd Qu.:0.0000   3rd Qu.:0.00000   3rd Qu.:0.000000  
 Max.   :66.000   Max.   :1.0000   Max.   :1.00000   Max.   :1.000000  
                                                                       
    AT109_4            AT109_5           AT109_6          AT109_7       
 Min.   :0.000000   Min.   :0.00000   Min.   :0.0000   Min.   :0.00000  
 1st Qu.:0.000000   1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:0.00000  
 Median :0.000000   Median :0.00000   Median :0.0000   Median :0.00000  
 Mean   :0.006903   Mean   :0.08513   Mean   :0.2281   Mean   :0.03225  
 3rd Qu.:0.000000   3rd Qu.:0.00000   3rd Qu.:0.0000   3rd Qu.:0.00000  
 Max.   :1.000000   Max.   :1.00000   Max.   :1.0000   Max.   :1.00000  
                                                                        
    AT109_8           AT109_9           AT109_10           AT109_11      
 Min.   :0.00000   Min.   :0.00000   Min.   :0.000000   Min.   :0.00000  
 1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.000000   1st Qu.:0.00000  
 Median :0.00000   Median :0.00000   Median :0.000000   Median :0.00000  
 Mean   :0.03119   Mean   :0.05479   Mean   :0.007106   Mean   :0.02375  
 3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.000000   3rd Qu.:0.00000  
 Max.   :1.00000   Max.   :1.00000   Max.   :1.000000   Max.   :1.00000  
                                                                         
    AT109_12           AT109_13           AT109_14           AT109_15     
 Min.   :0.000000   Min.   :0.000000   Min.   :0.000000   Min.   :0.0000  
 1st Qu.:0.000000   1st Qu.:0.000000   1st Qu.:0.000000   1st Qu.:0.0000  
 Median :0.000000   Median :0.000000   Median :0.000000   Median :0.0000  
 Mean   :0.006336   Mean   :0.008371   Mean   :0.001119   Mean   :0.1537  
 3rd Qu.:0.000000   3rd Qu.:0.000000   3rd Qu.:0.000000   3rd Qu.:0.0000  
 Max.   :1.000000   Max.   :1.000000   Max.   :1.000000   Max.   :1.0000  
                                                                          
    AT109_16          AT109_17           AT109_18         AT109_19      
 Min.   :0.00000   Min.   :0.000000   Min.   :0.0000   Min.   :0.00000  
 1st Qu.:0.00000   1st Qu.:0.000000   1st Qu.:0.0000   1st Qu.:0.00000  
 Median :0.00000   Median :0.000000   Median :0.0000   Median :0.00000  
 Mean   :0.00981   Mean   :0.001177   Mean   :0.2867   Mean   :0.02758  
 3rd Qu.:0.00000   3rd Qu.:0.000000   3rd Qu.:1.0000   3rd Qu.:0.00000  
 Max.   :1.00000   Max.   :1.000000   Max.   :1.0000   Max.   :1.00000  
                                                                        
  AT109_19_O         Factor_2016      Factor_2017   
 Length:68811       Min.   : 1.000   Min.   : 1.00  
 Class :character   1st Qu.: 1.000   1st Qu.: 1.00  
 Mode  :character   Median : 1.293   Median : 1.00  
                    Mean   : 2.912   Mean   : 2.00  
                    3rd Qu.: 3.080   3rd Qu.: 1.95  
                    Max.   :19.760   Max.   :12.05  
                    NA's   :28751    NA's   :40060  </code></pre>
</div>
</div>
</section>
<section id="step-3-explore-outcome-variable-must-be-numeric" class="level3">
<h3 class="anchored" data-anchor-id="step-3-explore-outcome-variable-must-be-numeric">Step 3: Explore outcome variable (must be numeric)</h3>
<p>We checked if the independent variable <code>automoviles involucrados</code> (VI - AT_106_1) is numeric. A general look at the database shows that this number represents only the value for cars of sedan or hatchback models, while other automobiles such as trucks, station wagons, buses or vans are excluded from this count.</p>
<p>It can be said that the variable could be considered as a categoric variable. While it has a numeric linear value, the max output is limited to 5. Added to this the output for any value of vehicles belongs to <span class="math inline">\(N\)</span> , as you can’t have half a vehicle involved in a car accident, which furthers the argument for a categorical analysis. Linear Regression is possible with one independent categoric variable, but has special considerations in the interpretation of its data.</p>
<p>For practice purposes we’ll consider it as a numeric variable, as the analysis with categoric variables omits many of the interpretations in a numeric variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>heridos <span class="ot">&lt;-</span> data_at<span class="sc">$</span>AT108_2</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>vehiculos <span class="ot">&lt;-</span> data_at<span class="sc">$</span>AT106_1_CANT</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(heridos) <span class="co">#Numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:68811] NA 2 NA 1 1 1 0 NA 1 1 ...
 - attr(*, "label")= chr "NÚMERO DE HERIDOS"
 - attr(*, "format.spss")= chr "F11.0"
 - attr(*, "display_width")= int 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(vehiculos) <span class="co">#Numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:68811] 1 1 NA NA NA 1 1 NA NA NA ...
 - attr(*, "label")= chr "VEHÍCULO MAYOR  AUTOMÓVIL - CANTIDAD"
 - attr(*, "format.spss")= chr "F11.0"
 - attr(*, "display_width")= int 11</code></pre>
</div>
</div>
</section>
<section id="step-4-make-sure-data-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="step-4-make-sure-data-assumptions">Step 4: Make sure data assumptions</h3>
<section id="a.-linearity" class="level4">
<h4 class="anchored" data-anchor-id="a.-linearity">A. Linearity</h4>
<p>When checking for linearity we can see that the points are not scattered in a linear distribution, they form columns for each whole value. They miss the mark in forming some sort of bell curve and most of the cases had only 1 automobile involved.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(heridos <span class="sc">~</span> vehiculos, <span class="at">data =</span> data_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="daniel_regression_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="b.-independence-of-observations" class="level4">
<h4 class="anchored" data-anchor-id="b.-independence-of-observations">B. Independence of observations</h4>
<p>Theoretically, we expect each variable to be independent</p>
</section>
<section id="c.-normality" class="level4">
<h4 class="anchored" data-anchor-id="c.-normality">C. Normality</h4>
<p>When checking for normality, the histogram is not bell shaped, which states a tendency of values in the lower numbers of the independent variable. Most of the cases had 1 or 2 automovile vehicles involved.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(vehiculos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="daniel_regression_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede evaluar la normalidad por  QQplot, Kurtosis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="step-5-perform-the-linear-regression-analysis" class="level3">
<h3 class="anchored" data-anchor-id="step-5-perform-the-linear-regression-analysis">Step 5: Perform the linear regression analysis</h3>
<p>In the analysis we see that the p value is favorable to us, as it is low enough to make this a good model. It appears to be a significant positive relationship between vehicles and people hurt in car accidents, with a 0,44 increase in people hurt for every unit of vehicles involved.</p>
<p>However, if we treat the variables as categorical ones, we can omit the linearity analysis and insist on this relation without trouble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data_at_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(heridos <span class="sc">~</span> vehiculos, <span class="at">data =</span> data_at)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data_at_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = heridos ~ vehiculos, data = data_at)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.3146 -0.5449 -0.5449  0.4551 27.4551 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  1.10247    0.03667   30.06   &lt;2e-16 ***
vehiculos    0.44243    0.03089   14.32   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.307 on 13116 degrees of freedom
  (55693 observations deleted due to missingness)
Multiple R-squared:  0.0154,    Adjusted R-squared:  0.01533 
F-statistic: 205.2 on 1 and 13116 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="step-6-check-the-homocedasticity" class="level3">
<h3 class="anchored" data-anchor-id="step-6-check-the-homocedasticity">Step 6: Check the homocedasticity</h3>
<p>Residuals show bias, as they are distributed between the two first values. If we consider the “vehicles” variable as categorical then we can also omit this test</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(data_at_lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="daniel_regression_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-7-perform-a-graph-to-visualize-the-results" class="level3">
<h3 class="anchored" data-anchor-id="step-7-perform-a-graph-to-visualize-the-results">Step 7: Perform a graph to visualize the results</h3>
<p>With the previous steps done we can graph the linear model an see that the number of vehicles involved has (eventhough small) a relation to the number of peopler hurt in the accident</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_at, <span class="fu">aes</span>(<span class="at">x=</span>vehiculos, <span class="at">y=</span>heridos)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> graph <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>, <span class="at">col=</span><span class="st">'blue'</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> graph <span class="sc">+</span> <span class="fu">stat_regline_equation</span>(<span class="at">label.x =</span> <span class="dv">3</span>, <span class="at">label.y =</span> <span class="dv">7</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 55693 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 55693 rows containing non-finite values
(`stat_regline_equation()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 55693 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="daniel_regression_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>relation <span class="ot">&lt;-</span> <span class="fu">lm</span>(vehiculos<span class="sc">~</span>heridos)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># give the chart a name</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file =</span> <span class="st">"linearregression.png"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(vehiculos,heridos, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">main =</span> <span class="st">"Regresión de vehículos y heridos en choques de autos"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>(vehiculos<span class="sc">~</span>heridos)), <span class="at">cex =</span> <span class="fl">1.3</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">xlab =</span> <span class="st">"vehiculos"</span>, <span class="at">ylab =</span> <span class="st">"heridos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-8-report-and-interpret-your-results" class="level3">
<h3 class="anchored" data-anchor-id="step-8-report-and-interpret-your-results">Step 8: Report and interpret your results</h3>
<p>We can interpret of this analysis that the number automovile vehicles invovled in car accidents have a relation with the number of wounded people. In our next analysis we will sum the number of different types of vehicles involved, so we can get a complete picture of the relation between vehicles involved and total number of wounde people.</p>
<p>We will also try to create an html site where you can select the type of vehicle you wish to add in the analysis</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>